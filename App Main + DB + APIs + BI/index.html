<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cargador de archivos Dengue</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="logo-container">
    <img src="/img/LOGO-CENTRADO-BLANCO-retina-mobile.png" alt="Imagen del Dengue">
</div>
<div class="container-wrapper">
    <div id="container">
        <h1>Cargador Archivos Dengue</h1>
        <form id="uploadForm">
            <label class="file-upload">
                <i class="fas fa-file-upload"></i> Seleccionar Archvios
                <input type="file" name="excelfiles[]" id="excelfile" multiple>
            </label>
            <ul class="file-list"></ul>
            <button type="button" id="upload-btn" disabled>Cargar archivos</button>
            <div id="progress">
                <div id="progress-bar">0%</div>
            </div>
        </form>
        <p id="message"></p>
        <button type="button" id="create-table-btn">Crear: Tabla Dengue</button>
        <!-- Nuevo botón aquí -->
        <a href="<%= apiEpDeUrl %>" target="_blank" id="apiEpDeLink">
            <button type="button" id="new-link-btn">API: Epidemia Dengue</button>
        </a>
        <a href="<%= apiChatbotUrl %>" target="_blank" id="apiChatbotLink">
            <button type="button" id="new-link-btn">UNLZ: Chatbot Dengue</button>
        </a>
        <a href="<%= apiChatbotUrl %>" target="_blank" id="apiOnlineLink">
            <button type="button" id="new-link-btn">APP ONLINE</button>
        </a>
        <p id="create-table-message"></p>
    </div>
    <div id="container2">
        <h1>Scraping & OCR</h1>
        <form id="scrapeForm">
            <label for="url">URL:</label>
            <input type="text" id="url" name="url" required>
            <button type="submit" style="background-color: #4CAF50; color: #fff;">Realizar Scraping & OCR</button>
        </form>
        <p id="scrape-message"></p>
        <button type="button" id="createScrapingOcrTableBtn">Crear: Tabla Scraping & OCR Dengue</button>
        <!-- Nuevo botón aquí -->
        <a href="<%= apiScrapingOcrUrl %>" target="_blank" id="apiScrapingOcrLink">
            <button type="button" id="new-link-btn">API: Epidemia Scraping & OCR Dengue</button>
        </a>
        <a href="<%= apiScrapingOcrUrl %>" target="_blank" id="apiPm2Link">
            <button type="button" id="new-link-btn">Monitor PM2 - On Premise</button>
        </a>
        <a href="<%= apiScrapingOcrUrl %>" target="_blank" id="apiNgrokLink">
            <button type="button" id="new-link-btn">Monitor T-CLOUD - Ngrok</button>
        </a>
        <p id="create-scraping-ocr-table-message"></p>
    </div>
</div>
<script>
    fetch('/env')
        .then(response => response.json())
        .then(env => {
            document.getElementById('apiEpDeLink').href = env.apiEpDeUrl;
            document.getElementById('apiChatbotLink').href = env.apiChatbotUrl;
            document.getElementById('apiScrapingOcrLink').href = env.apiScrapingOcrUrl;
            document.getElementById('apiPm2Link').href = env.apiPm2Url;
            document.getElementById('apiNgrokLink').href = env.apiNgrokUrl;
            document.getElementById('apiOnlineLink').href = env.apiOnlineUrl;
        })
        .catch(error => console.error('Error loading environment variables:', error));
</script>
<script src="script.js"></script>
</body>
</html>